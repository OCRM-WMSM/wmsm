<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace指用户自定义的命名空间。 -->
<mapper namespace="com.boc.wms.user.mapper.UserMapper">
	
	<resultMap id="EmployeeMap" type="com.boc.wms.user.vo.Employee">
	  <id property="employeeId" column="c_employeeid"/>
	  <result property="name" column="c_name"/>
	  <result property="gender" column="c_gender"/>
	  <result property="jobId" column="c_jobid"/>
	  <result property="jobName" column="c_jobname"/>
	  <result property="parentCode" column="c_parentcode"/>
	  <result property="parentName" column="c_parentname"/>
	  <result property="hireDate" column="c_hiredate"/>
	  <result property="orgCode" column="c_orgcode"/>
	  <result property="orgName" column="c_orgname"/>
	  <result property="unitCode" column="c_unitcode"/>
	  <result property="unitName" column="c_unitname"/>
	  <result property="employeeType" column="c_employeetype"/>
	  <result property="employeeStatus" column="c_employeestatus"/>
	  <result property="lastMaintDate" column="last_maint_date"/>
	  <result property="empPwd" column="c_emp_pwd"/>
	  <result property="accStatus" column="c_acc_status"/>
	  <result property="onlineFlag" column="c_online_flag"/>
	  <result property="annulReason" column="c_annul_reason"/>
	</resultMap>
	<select id="findUserById" parameterType="string" resultMap="EmployeeMap">
		select  c_name           ,
				c_gender         ,
				c_employeeid     ,
				c_jobid          ,
				c_jobname        ,
				c_parentcode     ,
				c_parentname     ,
				c_hiredate       ,
				c_orgcode        ,
				c_orgname        ,
				c_unitcode       ,
				c_unitname       ,
				c_employeetype   ,
				c_employeestatus ,
				last_maint_date  ,
				c_emp_pwd,
				c_acc_status,
				c_online_flag,
				c_annul_reason
		       from EHR_INF_EMPLOYEE
		       where c_employeeid=#{username}
	</select>
	
	<update id="updateUserById" parameterType="com.boc.wms.user.vo.Employee" >
		update  EHR_INF_EMPLOYEE 
		<set>
		  <if test="name != null and name !=''">
		    c_name=#{name},
		  </if>
		  <if test="gender != null and gender !=''">
		    c_gender=#{gender},
		  </if>
		  <if test="jobId != null and jobId !=''">
		    c_jobid=#{jobId},
		  </if>
		  <if test="jobName != null and jobName !=''">
		    c_jobname=#{jobName},
		  </if>
		  <if test="parentCode != null and parentCode !=''">
		    c_parentcode=#{parentCode},
		  </if>
		  <if test="parentName != null and parentName !=''">
		    c_parentname=#{parentName},
		  </if>
		  <if test="hireDate != null and hireDate !=''">
		    c_hiredate=#{hireDate},
		  </if>
		  <if test="orgCode != null and orgCode !=''">
		    c_orgcode=#{orgCode},
		  </if>
		  <if test="orgName != null and orgName !=''">
		    c_orgname=#{orgName},
		  </if>
		  <if test="unitCode != null and unitCode !=''">
		    c_unitcode=#{unitCode},
		  </if>
		  <if test="unitName != null and unitName !=''">
		    c_unitname=#{unitName},
		  </if>
		  <if test="employeeType != null and employeeType !=''">
		    c_employeetype=#{employeeType},
		  </if>
		  <if test="employeeStatus != null and employeeStatus !=''">
		    c_employeestatus=#{employeeStatus},
		  </if>
		  <if test="lastMaintDate != null and lastMaintDate !=''">
		    last_maint_date=#{lastMaintDate},
		  </if>
		  <if test="empPwd != null and empPwd !=''">
		    c_emp_pwd=#{empPwd},
		  </if>
		  <if test="accStatus != null and accStatus !=''">
		    c_acc_status=#{accStatus},
		  </if>
		  <if test="onlineFlag != null and onlineFlag !=''">
		    c_online_flag=#{onlineFlag},
		  </if>
		  <if test="annulReason != null and annulReason !=''">
		    c_annul_reason=#{annulReason},
		  </if>
		
		</set>   
		 where c_employeeid=#{employeeId}
	</update>
	
	<update id="resetUserPwdById">
	     update  EHR_INF_EMPLOYEE  set c_emp_pwd=#{password} where c_employeeid=#{employeeId}
	
	</update>
	
	
</mapper>